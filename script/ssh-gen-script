#/usr/bin/bash

while getopts e:f:p: flag
do
    case "${flag}" in
        e) email=${OPTARG};;
        f) file=${OPTARG};;
        p) password=${OPTARG};;
    esac
done

ssh-keygen -t ed25519 -C "$email" -f "$HOME/.ssh/$file" -P "$password" &
wait
eval "$(ssh-agent -s)"
wait
ssh-add $HOME/.ssh/$file;
wait
cat "$HOME/.ssh/$file.pub"
